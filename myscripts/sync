#!/usr/bin/env ruby
# Sync and push myscripts to github.

require "FileUtils"
include FileUtils

script_dir = "/usr/local/bin"
dest_dir = "/Volumes/Data/Developer.localized/github/myscripts/"

cd script_dir do
  cp "my", dest_dir
  cp_r "myscripts", dest_dir
end

cd dest_dir do
  if ARGV.size == 0
    message = "Updated at #{Time.now.strftime('%Y-%m-%d %H:%M:%S')}"
    system "my commit -p \"#{message}\""
  elsif ARGV[0] == "-p" && ARGV.size > 1
    argv = ARGV;argv.shift
    message = argv.join(" ")
    system "my commit -p \"#{message}\""
  else
    system "git #{ARGV.join(' ')}"
  end
end
